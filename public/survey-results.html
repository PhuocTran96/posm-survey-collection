<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Survey Results - Menu</title>
    <link rel="stylesheet" href="styles-admin.css">
</head>
<body>
    <div class="admin-container">
        <!-- Navigation -->
        <nav class="admin-nav">
            <div class="nav-brand">
                <h1>üìä Menu</h1>
            </div>
            <div class="nav-menu">
                <a href="survey-results.html" class="nav-item active">
                    üìã K·∫øt qu·∫£ kh·∫£o s√°t
                </a>
                <a href="data-upload.html" class="nav-item">
                    üì§ Qu·∫£n l√Ω d·ªØ li·ªáu
                </a>
                <a href="user-management.html" class="nav-item">
                    üë• Qu·∫£n l√Ω ng∆∞·ªùi d√πng
                </a>
                <a href="store-management.html" class="nav-item">
                    üè™ Qu·∫£n l√Ω c·ª≠a h√†ng
                </a>
                <a href="display-management.html" class="nav-item">
                    üñ•Ô∏è Qu·∫£n l√Ω Display
                </a>
            </div>
            <div class="nav-mobile-toggle" id="navMobileToggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </nav>

        <!-- Page Header -->
        <div class="page-header">
            <div class="page-header-content">
                <h1>üìã K·∫øt qu·∫£ kh·∫£o s√°t POSM</h1>
                <p>Xem, l·ªçc v√† xu·∫•t k·∫øt qu·∫£ kh·∫£o s√°t t·ª´ c√°c c·ª≠a h√†ng</p>
            </div>
        </div>

        <!-- Statistics -->
        <div class="stats-container" id="statsContainer">
            <!-- Stats will be loaded here -->
        </div>

        <!-- Filters -->
        <div class="filters filters-unified">
            <div class="filter-group filter-main">
                <label>Submitted By:</label>
                <select id="submittedByFilter">
                    <option value="">T·∫•t c·∫£ ng∆∞·ªùi d√πng</option>
                </select>
            </div>
            <div class="filter-group filter-main">
                <label>Shop:</label>
                <div class="autocomplete-wrapper">
                    <input type="text" id="shopFilter" placeholder="T√¨m ki·∫øm shop..." autocomplete="off">
                    <div id="shopDropdown" class="autocomplete-dropdown"></div>
                </div>
            </div>
            <div class="filter-group filter-date">
                <label>T·ª´ ng√†y:</label>
                <input type="date" id="dateFromFilter">
            </div>
            <div class="filter-group filter-date">
                <label>ƒê·∫øn ng√†y:</label>
                <input type="date" id="dateToFilter">
            </div>
            <div class="filter-group filter-control">
                <label>S·ªë k·∫øt qu·∫£/trang:</label>
                <select id="pageSizeSelector">
                    <option value="10">10</option>
                    <option value="20" selected>20</option>
                    <option value="50">50</option>
                    <option value="100">100</option>
                </select>
            </div>
            <div class="filter-group filter-actions">
                <button id="clearFiltersBtn" class="btn-filter-clear" title="X√≥a b·ªô l·ªçc">üóëÔ∏è</button>
                <button id="exportData" class="btn-filter-export" title="Xu·∫•t Excel">üìä</button>
            </div>
        </div>

        <!-- Bulk Actions -->
        <div class="bulk-actions">
            <div class="selection-mode-toggle">
                <label>Ch·∫ø ƒë·ªô ch·ªçn:</label>
                <select id="selectionModeToggle">
                    <option value="survey">üìã To√†n b·ªô kh·∫£o s√°t</option>
                    <option value="model">üì¶ Model ri√™ng l·∫ª</option>
                </select>
            </div>
            <button id="selectAllBtn" class="btn btn-secondary" type="button">
                ‚òëÔ∏è Ch·ªçn t·∫•t c·∫£
            </button>
            <button id="bulkDeleteBtn" class="btn btn-danger" disabled>
                üóëÔ∏è X√≥a c√°c kh·∫£o s√°t ƒë√£ ch·ªçn
            </button>
        </div>

        <!-- Survey Results -->
        <div class="responses-container" id="responsesContainer">
            <!-- Responses will be loaded here -->
        </div>

        <!-- Loading overlay -->
        <div id="loadingOverlay" class="loading-overlay">
            <div class="loading-spinner"></div>
            <p>ƒêang t·∫£i d·ªØ li·ªáu...</p>
        </div>

        <!-- Confirm delete dialog -->
        <div id="confirmDeleteDialog" class="confirm-dialog">
            <div class="confirm-content">
                <h3>X√°c nh·∫≠n x√≥a</h3>
                <p>B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a k·∫øt qu·∫£ kh·∫£o s√°t n√†y?</p>
                <div class="confirm-buttons">
                    <button id="btnConfirmDelete" class="btn-confirm">X√≥a</button>
                    <button id="btnCancelDelete" class="btn-cancel">H·ªßy</button>
                </div>
            </div>
        </div>

        <!-- Edit Survey Dialog -->
        <div id="editSurveyDialog" class="modal-overlay" style="display: none;">
            <div class="modal-content edit-modal">
                <div class="modal-header">
                    <h3>‚úèÔ∏è Ch·ªânh s·ª≠a kh·∫£o s√°t</h3>
                    <button class="modal-close" onclick="surveyResultsApp.closeEditDialog()">&times;</button>
                </div>
                <div class="modal-body" id="editModalBody">
                    <!-- Edit form will be dynamically loaded here -->
                </div>
                <div class="modal-footer">
                    <button id="btnSaveEdit" class="btn btn-primary">üíæ L∆∞u thay ƒë·ªïi</button>
                    <button id="btnCancelEdit" class="btn btn-secondary" onclick="surveyResultsApp.closeEditDialog()">‚ùå H·ªßy</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="survey-results.js"></script>
</body>
</html>